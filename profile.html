<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Notes Gallery - Contact Page</title>

    <!-- Css File -->
    <link rel="stylesheet" href="assets/css/style.css" />

    <!-- Favicon Link -->
    <link
      rel="icon"
      type="image/png"
      href="assets/images/logo_icon.png"
      sizes="16x16"
    />

    <!-- Bootstrap Css Link -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />

    <!-- owlCarousel css links -->
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css" />
    <link rel="stylesheet" href="assets/css/owl.theme.default.min.css" />

    <!-- Google Fonts Links  -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <!-- fontawesome icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Bootstrap select css  -->
    <link rel="stylesheet" href="assets/css/bootstrap-select.css" />
  </head>
  <body>
    <main id="profile-page">
      <!-- Header Section Starts -->
      <section id="header-section" class="px-4 shadow-sm">
        <nav class="navbar navbar-expand-lg">
          <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="#">
              <img src="assets/images/logo_icon.png" alt="icon" />
              <h5 class="mb-0 ms-2">Notes Gallery</h5>
            </a>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNav"
              aria-controls="navbarNav"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div
              class="collapse navbar-collapse justify-content-end"
              id="navbarNav"
            >
              <ul class="navbar-nav pt-2 ps-3 ps-md-4">
                <li class="nav-item">
                  <a class="nav-link me-3 text-black" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link me-3 text-black" href="notes_library.html"
                    >Notes Library</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="d-lg-block d-none nav-link me-3 text-black theme-btn rounded-pill px-3 py-2 font-work-sans"
                    href="login.html"
                    >Login</a
                  >
                  <a
                    class="nav-link d-lg-none me-3 text-black"
                    href="login.html"
                    >Login</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="d-lg-block d-none nav-link me-3 text-black theme-btn rounded-pill px-3 py-2 font-work-sans"
                    href="register.html"
                    >Register</a
                  >
                  <a
                    class="nav-link d-lg-none me-3 text-black"
                    href="register.html"
                    >Register</a
                  >
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </section>
      <!-- Header Section Ends -->

      <!-- profile section starts -->
      <section id="profile-section" class="pt-5 pb-5">
        <div class="container px-4">
          <!-- Section Header -->
          <div class="section-title mb-4 text-center">
            <h2 class="fw-bold fs-32">My Profile</h2>
            <p class="form-control-text-color fs-14">
              Manage your account information, update preferences, and
              personalize your experience.
            </p>
          </div>

          <div class="row justify-content-center">
            <div class="col-lg-10">
              <div class="profile-card p-4 bg-white rounded-4">
                <form action="" id="profileForm">
                  <div class="row">
                    <div class="col-12">
                      <div class="d-flex justify-content-center">
                        <div class="d-flex shadow-sm rounded-4 px-4 py-3 mb-4">
                          <div class="row">
                            <div
                              class="col-md-4 text-center align-content-center"
                            >
                              <img
                                src="assets/images/user_default_logo.png"
                                alt="Profile Photo"
                                class="rounded-circle mb-2 cursor-pointer"
                                style="
                                  width: 120px;
                                  height: 120px;
                                  object-fit: cover;
                                "
                                id="profilePreview"
                                onclick="document.querySelector('#profile_pic').click()"
                              />
                              <input
                                type="file"
                                id="profile_pic"
                                name="profile_pic"
                                accept="image/*"
                                class="form-control mt-2 w-auto mx-auto"
                                hidden
                              />
                            </div>
                            <div
                              class="col-md-8 ps-md-4 text-center text-md-start align-content-center"
                            >
                              <h4
                                class="fw-bold fs-26 fs-sm-22 d-none d-md-block profile_card_name"
                              >
                                Your Name
                              </h4>
                              <p
                                class="form-control-text-color d-none d-md-block profile_card_email fs-14"
                              >
                                example@email.com
                              </p>
                              <a
                                class="btn d-md-none theme-btn rounded-4 fw-bold"
                                onclick="document.querySelector('#profile_pic').click()"
                                >Change Avatar</a
                              >
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Full Name -->
                    <div class="col-md-6 mb-3">
                      <label class="form-label">Full Name</label>
                      <input
                        id="fullname"
                        name="fullname"
                        type="text"
                        class="form-control py-3 px-2 bg-light rounded-4"
                        placeholder="Enter Full Name"
                        oninput="this.value = this.value.replace(/[^a-zA-Z\s]/g, '')"
                        required
                      />
                    </div>

                    <!-- Date of Birth -->
                    <div class="col-md-6 mb-3">
                      <label class="form-label">Date of Birth</label>
                      <input
                        id="dob"
                        name="dob"
                        type="date"
                        class="form-control py-3 px-2 bg-light rounded-4"
                        required
                      />
                    </div>

                    <!-- Gender -->
                    <div class="col-md-6 mb-3">
                      <label class="form-label">Gender</label>
                      <select
                        id="gender"
                        name="gender"
                        class="form-control selectpicker bg-light rounded-4"
                        required
                      >
                        <option value="" disabled selected>
                          Select Gender
                        </option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                      </select>
                    </div>

                    <!-- Phone -->
                    <div class="col-md-6 mb-3">
                      <label class="form-label">Phone Number</label>
                      <input
                        id="mobile"
                        name="mobile"
                        type="text"
                        class="form-control py-3 px-2 bg-light rounded-4"
                        maxlength="10"
                        placeholder="Enter Phone Number"
                        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                        required
                      />
                    </div>

                    <!-- Email -->
                    <div class="col-md-6 mb-3">
                      <label class="form-label">Email Address</label>
                      <input
                        id="email"
                        name="email"
                        type="email"
                        class="form-control py-3 px-2 bg-light rounded-4"
                        placeholder="Enter Email"
                        required
                      />
                    </div>

                    <!-- Address -->
                    <div class="col-md-6 mb-3">
                      <label class="form-label">Address</label>
                      <input
                        id="address"
                        name="address"
                        type="text"
                        class="form-control py-3 px-2 bg-light rounded-4"
                        placeholder="Enter Address"
                      />
                    </div>

                    <!-- Stream -->
                    <div class="col-md-6 mb-3">
                      <label class="form-label">Stream</label>
                      <select
                        id="prefered_stream"
                        name="prefered_stream"
                        class="form-control selectpicker bg-light rounded-4"
                        required
                      ></select>
                    </div>

                    <!-- Language -->
                    <div class="col-md-6 mb-3">
                      <label class="form-label">Language Preference</label>
                      <select
                        id="prefered_language"
                        name="prefered_language"
                        class="form-control selectpicker bg-light rounded-4"
                      >
                        <option value="" disabled selected>
                          Select Language
                        </option>
                        <option value="english">English</option>
                        <option value="hindi">Hindi</option>
                        <option value="marathi">Marathi</option>
                      </select>
                    </div>

                    <!-- Save Button -->
                    <div class="col-12 text-end mt-4">
                      <div class="row">
                        <div class="col-lg-3 offset-lg-9">
                          <button
                            type="submit"
                            class="btn w-100 submitBtn border-0 theme-btn rounded-pill px-4 py-2 fs-16 fw-bold"
                          >
                            Save Changes
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- profile section Ends -->

      <!-- Footer Section Starts -->
      <section id="footer-section" class="pb-4 pt-md-5 pt-4 mt-lg-3">
        <div class="container">
          <div class="row">
            <div class="col-md-4 col-6 text-center">
              <a
                href="about.html"
                class="text-decoration-none text-black-50 fs-sm-14"
                >About Us</a
              >
            </div>
            <div class="col-md-4 col-6 text-center">
              <a
                href="contact.html"
                class="text-decoration-none text-black-50 fs-sm-14"
                >Contact Us</a
              >
            </div>
            <div class="col-md-4 col-12 text-center">
              <a
                href="privacy_policy.html"
                class="text-decoration-none text-black-50 fs-sm-14"
                >Privacy Policy</a
              >
            </div>
            <div class="col-lg-12">
              <p class="text-black-50 text-center fs-sm-14 my-3">
                &copy;2025 Notes Gallery. All rights reserved.
              </p>
            </div>
          </div>
        </div>
      </section>
      <!-- Footer Section Ends -->
    </main>

    <script src="assets/js/jquery-3.7.1.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/bootstrap-select.js"></script>
    <script src="assets/js/sweetalert2.all.min.js"></script>
    <script src="assets/js/config.js"></script>
    <script src="assets/js/main.js"></script>

    <script>
      document.querySelector("#profile_pic").addEventListener("change", (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (e) {
            document.getElementById("profilePreview").src = e.target.result;
          };
          reader.readAsDataURL(file);
        }
      });
    </script>

    <script>
      const form = document.querySelector("form#profileForm");
      const stream_select = form.querySelector("#prefered_stream");
      const submitBtn = form.querySelector(".submitBtn");

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        submitBtn.innerHTML = `<span
        class="spinner-border spinner-border-sm me-2"
        role="status"
        aria-hidden="true"
        ></span>`;
        submitBtn.disabled = true;
        let formData = new FormData(form);
        fetch(`${API_BASE_URL}/users/update-profile`, {
          method: "POST",
          credentials: "include",
          body: formData,
        })
          .then(async (res) => {
            return await res.json();
          })
          .then((data) => {
            submitBtn.innerHTML = "Save Changes";
            submitBtn.disabled = false;
            fireSweetAlert({
              success: data.success,
              message: data.message,
            }).then(() => {
              if (data.success) {
                location.reload();
              }
            });
          });
      });
    </script>
  </body>
</html>
